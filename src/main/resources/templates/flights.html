<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Flights</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>

    <div class="search-form">
        <h2>Search Flights</h2>
        <form th:action="@{/flights}" method="get">
            <label for="from">From:</label>
            <input type="text" id="from" name="from" placeholder="Origin">

            <label for="to">To:</label>
            <input type="text" id="to" name="to" placeholder="Destination">

            <label for="date">Date:</label>
            <input type="date" id="date" name="date">

            <input type="submit" value="Search">
            <a href="/resetSearch" class="reset-button">Reset</a>
        </form>
        <!-- Button to go to the itinerary page, positioned under the reset button -->
        <div class="itinerary-button">
            <a href="/add-to-itinerary" class="btn">View Itinerary</a>
        </div>
    </div>

    <div class="container">
        <!-- Display user's name -->
        <div th:if="${userName}">
            <p>Welcome, <span th:text="${userName}">User</span>!</p>
        </div>

        <h2>Flight Schedule</h2>
        <table>
            <thead>
                <tr>
                    <th>Departure</th>
                    <th>Destination</th>
                    <th>Departure Time</th>
                    <th>Arrival Time</th>
                    <th>Price</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="flight : ${flights}">
                    <td th:text="${flight.departureLocation}"></td>
                    <td th:text="${flight.destinationLocation}"></td>
                    <td th:text="${flight.departureTime}"></td>
                    <td th:text="${flight.arrivalTime}"></td>
                    <td th:text="${flight.price}"></td>
                    <td>
                        <!-- Book button -->
                        <a th:href="@{/book/{id}(id=${flight.flightId})}" class="book-button">Book</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
